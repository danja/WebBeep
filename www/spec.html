<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
      "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:owl="http://www.w3.org/2002/07/owl#"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:foaf="http://xmlns.com/foaf/0.1/"
 xmlns:dc="http://purl.org/dc/elements/1.1/">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Web Beeps Specification</title>
  <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/" />
</head>

<body>
<h1>Web Beeps Specification</h1>

<h2>Status</h2>

<p><strong>First Draft 2011-12-04</strong></p>

<p><em>Currently for guidance only, subject to change following
testing/experimentation (although it's unlikely to have major impact on
implementation)</em></p>

<h2>Introduction</h2>

<p>This document defines an algorithm for encoding arbitrary text as audio
data.</p>

<h2>Encoding</h2>

<p>FILTER, DOWNSAMPLE to 22kHz ???</p>

<p>i18n, A checksum character is prepended to the ASCII</p>

<p>The numeric data resulting from the operations above will typically be
rendered in a audio binary format and subsequently rendered through a media
player. The choice of audio format is left to the implementor, although for
signal fidelity a lossless format is recommended (the Reference Implementation
uses <a href="http://en.wikipedia.org/wiki/WAV">.wav</a> 16 bit PCM format
mono, 44.1kHz, see Constants.java and WavCodec.java)</p>

<p></p>

<h3>Internationalization</h3>

<p>The Unicode characters in the source string are initially encoded in ASCII
using the full algorithm of <a
href="http://docs.oracle.com/javase/6/docs/api/java/net/IDN.html#toASCII(java.lang.String)">java.net.IDN.toASCII</a>
(the no-flags version), which is as follows:</p>

<blockquote>
  Internationalized domain names are defined in <a
  href="http://www.ietf.org/rfc/rfc3490.txt">RFC 3490</a>. RFC 3490 defines two
  operations: ToASCII and ToUnicode. These 2 operations employ <a
  href="http://www.ietf.org/rfc/rfc3491.txt">Nameprep</a> algorithm, which is a
  profile of <a href="http://www.ietf.org/rfc/rfc3454.txt">Stringprep</a>, and
  <a href="http://www.ietf.org/rfc/rfc3492.txt">Punycode</a> algorithm to
  convert domain name string back and forth. 

  <p>...</p>

  <p>A label is an individual part of a domain name. The original ToASCII
  operation, as defined in RFC 3490, only operates on a single label. This
  method can handle both label and entire domain name, by assuming that labels
  in a domain name are always separated by dots. The following characters are
  recognized as dots: \u002E (full stop), \u3002 (ideographic full stop),
  \uFF0E (fullwidth full stop), and \uFF61 (halfwidth ideographic full stop).
  if dots are used as label separators, this method also changes all of them to
  \u002E (full stop) in output translated string.</p>
</blockquote>

<h3>Checksum</h3>

<p>The checksum character to prepend to the ASCII representation is determined
as followed:</p>
<ol>
  <li>the numeric code value of each character (0-127) in the ASCII
    representation is obtained</li>
  <li>all numeric values are summed</li>
  <li>the lower 7 bits of the sum is the numeric value of the checksum
  character</li>
</ol>

<h4>Example</h4>

<p>If the ASCII input string is "abc" :</p>
<ul>
  <li>the numeric codes for these characters are 97, 98, 99</li>
  <li>the sum of these values is 294 </li>
  <li>the lower 7 bits of the sum is (294 % 128 =) 38, which is ASCII
  '&amp;'</li>
</ul>

<p>So the resultant string with checksum is "&amp;abc".</p>

<p><em><strong>See Also</strong></em></p>
<ul>
  <li>Implementation : <a
    href="https://github.com/danja/WebBeep/blob/master/src/org/hyperdata/beeps/encode/Checksum.java">org/hyperdata/beeps/encode/Checksum.java</a></li>
  <li><a
    href="https://github.com/danja/WebBeep/blob/master/docs/ascii.txt">ASCII
    Character Table</a></li>
</ul>

<p></p>

<h3>Tone Map</h3>

<p></p>

<p>// Implementation</p>

<p></p>

<p></p>

<p style="text-align:right;margin-left:auto;margin-right:0;"><a rel="license"
href="http://creativecommons.org/licenses/by/3.0/"><img
alt="Creative Commons License" style="border-width:0"
src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a><br />
This work is licensed under a <a rel="license"
href="http://creativecommons.org/licenses/by/3.0/"></a></p>

<p style="text-align:right;margin-left:auto;margin-right:0;"><a rel="license"
href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution
3.0 Unported License</a>. </p>

<p style="text-align:right;margin-left:auto;margin-right:0;">(c) <a
href="http://dannyayers.com">Danny Ayers</a> 2011</p>
</body>
</html>
